!function(){var e=window.URLSearchParams&&window.location?new URLSearchParams(window.location.search):{get:function(){}},t=e.get("algolia_app_id")||"Y4PFTTJ91H",n=e.get("algolia_api_key")||"13cb82a358f97cd95f3321f14d6c3e44",i=e.get("algolia_index")||"stripe-docs",r=algoliasearch(t,n).initIndex(i),o=document.querySelector(".search"),c=o.querySelector("input"),a=o.querySelector(".search-text"),l=document.querySelector(".search-results"),s=document.querySelector(".search-after-text--no-results"),d=l.querySelector(".results"),u=!1,h=debounce(L,100),p=0,y=null,f={query:"",selectedIndex:0};function m(){void 0!==window.sessionStorage&&(sessionStorage.setItem("docs-search-query",f.query),sessionStorage.setItem("docs-search-index",f.selectedIndex))}function g(e){if(40===e.keyCode)f.selectedIndex<p-1&&(f.selectedIndex+=1,m(),w()),e.preventDefault();else if(38===e.keyCode)f.selectedIndex>0&&(f.selectedIndex-=1,m(),w()),e.preventDefault();else if(13===e.keyCode){var t=d.querySelector("li.selected a");t&&(o.dispatchEvent(new Event("openSearchResult")),x(),page.openURL(t),e.preventDefault())}}function v(){u||(u=!0,document.addEventListener("keydown",g),overlayController.show(x),l.style.visibility="visible",o.style.width="600px",dynamics.animate(l,{opacity:1},{type:dynamics.easeInOut,friction:350,duration:250}),f.selectedIndex=0,m(),w())}function x(){u&&(u=!1,document.removeEventListener("keydown",g),o.style.width="400px",overlayController.hide(),dynamics.animate(l,{opacity:0},{type:dynamics.easeInOut,duration:250,complete:function(){l.style.visibility="hidden"}}))}function L(e,t){if(e!==y){if(/[0-9-\s]{12,20}/.test(e)||e.indexOf("sk_")>-1)return p=0,void S([]);y=e,r.search(e,{attributesToHighlight:"hierarchy,content",highlightPreTag:"[h]",highlightPostTag:"[/h]",hitsPerPage:10},function(e,n){if(!e){var i={},r=n.hits.filter(function(e){var t=parseURL(e.url);return i[t.pathname]=!0,!0}),o=["recipes","more recipes","next steps","next up","up next"],c=r.map(function(e){for(var t=Object.keys(e._highlightResult.hierarchy).sort(),n="",i="",r=t.length-1;r>0;r--){var c=e._highlightResult.hierarchy[t[r]];c&&(c=c.value),c&&i!==c&&-1===o.indexOf(c.toLowerCase())&&(n.length>0&&(n=" â€º "+n),n=c+n,i=c)}var a=parseURL(e.url);return{title:n,url:a.pathname+("#content"===a.hash?"":a.hash),content:e._highlightResult.content&&e._highlightResult.content.value,type:"page",declaration:""}});t||(f.selectedIndex=0,m()),S(c)}})}}function w(){var e=d.querySelector("li.selected")||d.querySelector("li:first-child");if(e){e.classList.remove("selected"),(e=d.querySelector("li:nth-child("+(f.selectedIndex+1)+")")).classList.add("selected");var t=e.getBoundingClientRect(),n=t.top-12,i=t.top+t.height+12;0===f.selectedIndex?document.body.scrollTop=0:n<0?document.body.scrollTop=document.body.scrollTop+n:i>=window.innerHeight&&(document.body.scrollTop=document.body.scrollTop-(window.innerHeight-i))}}function I(e){"function"==typeof DOMParser?e=(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e=$("<div/>").text(e).html();return e=(e=e.replace(/\[h\]/g,"<em>")).replace(/\[\/h\]/g,"</em>")}function S(e){p=e.length;for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var i=e[n],r=document.createElement("li");n===f.selectedIndex&&r.classList.add("selected");var o,c=document.createElement("a");if(c.innerHTML=I(i.title),c.href=i.url,c.addEventListener("click",function(e){x(),page.openLink(e)}),r.appendChild(c),i.declaration)(o=document.createElement("div")).classList.add("tag"),o.classList.add("method"),o.innerText=i.declaration.replace(/http.*\/v1/,"/v1"),r.appendChild(o);if("reference"===i.type||-1!==i.url.indexOf("/docs/api"))(o=document.createElement("div")).classList.add("api-reference"),r.appendChild(o);if(i.content){var a=document.createElement("p");a.innerHTML=I(i.content),r.appendChild(a)}t.appendChild(r)}d.innerHTML="",d.appendChild(t),s.style.visibility=0===p?"visible":""}!function(){if(void 0!==window.sessionStorage){var e=sessionStorage.getItem("docs-search-query"),t=sessionStorage.getItem("docs-search-index")||0;e&&(f.query=e,f.selectedIndex=t,c.value=f.query,a.textContent=f.query,L(f.query,!0)),document.addEventListener("keyup",function(e){if((191==e.keyCode||83==e.keyCode)&&!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLSelectElement))return c.focus(),c.select(),!1})}}(),c.addEventListener("keyup",function(){var e=c.value;f.query!==e&&(f.query=e,a.textContent=e,s.style.visibility="",m(),e.length>0?(v(),h(e)):x())}),c.addEventListener("focus",function(){c.value.length>0&&v(),c.select()}),d.addEventListener("mousedown",function(e){for(var t=e.target;t&&"LI"!==t.tagName;)t=t.parentNode;if(t){var n=t.parentNode.children;n=Array.prototype.slice.call(n,this),f.selectedIndex=n.indexOf(t),m(),w()}})}();